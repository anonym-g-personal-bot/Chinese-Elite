<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Elite - Interactive Graph</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div id="search-trigger-container">
            <button id="search-toggle-btn" aria-label="打开搜索">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
            </button>
            <div id="search-mode-selector" class="collapsed">
                <div id="search-mode-current" tabindex="0" role="button" aria-haspopup="true" aria-expanded="false">
                    <span>节点</span>
                    <svg class="chevron-down" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                </div>
                <ul id="search-mode-options" role="menu" class="collapsed">
                    <li role="menuitem" data-mode="node">节点</li>
                    <li role="menuitem" data-mode="path">路径</li>
                </ul>
            </div>
        </div>

        <h1>『中国精英：关系图谱』</h1>

        <div class="social-links">
            <a href="https://x.com/trailblaziger/status/1976279055759704157" target="_blank" rel="noopener noreferrer" class="twitter-bird-link" aria-label="Check My Post">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" role="img">
                    <title>Twitter Bird</title>
                    <path fill="#03A9F4" d="M22.46,6C21.69,6.35,20.86,6.58,20,6.69C20.88,6.16,21.56,5.32,21.88,4.31C21.05,4.81,20.13,5.16,19.16,5.36C18.37,4.5,17.26,4,16,4C13.65,4,11.73,5.92,11.73,8.29C11.73,8.63,11.77,8.96,11.84,9.27C8.28,9.09,5.11,7.38,2.9,4.79C2.53,5.42,2.33,6.15,2.33,6.94C2.33,8.43,3.11,9.75,4.26,10.54C3.55,10.52,2.88,10.31,2.3,10.01C2.3,10.03,2.3,10.05,2.3,10.06C2.3,12.16,3.77,13.93,5.85,14.34C5.49,14.44,5.1,14.49,4.7,14.49C4.42,14.49,4.15,14.46,3.89,14.41C4.45,16.14,6.01,17.41,7.86,17.45C6.4,18.6,4.54,19.31,2.5,19.31C2.17,19.31,1.85,19.29,1.53,19.24C3.4,20.48,5.57,21.19,7.85,21.19C16.01,21.19,20.24,14.33,20.24,8.5C20.24,8.32,20.24,8.14,20.23,7.96C21.08,7.38,21.84,6.67,22.46,6Z"/>
                </svg>
            </a>
            <a href="https://x.com/trailblaziger" target="_blank" rel="noopener noreferrer" class="twitter-link" aria-label="Follow on Twitter">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" role="img">
                    <title>Twitter</title>
                    <path fill="#FFF" d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                </svg>
            </a>
            <a href="https://t.me/ChineseEliteTeleGroup" target="_blank" rel="noopener noreferrer" class="telegram-link" aria-label="Join Telegram Group">
                <svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 24 24">
                    <title>Telegram</title>
                    <circle cx="12" cy="12" r="9" fill="#FFF"/>
                    <path fill="#26A5E4" d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
                </svg>
            </a>
            <a href="https://github.com/anonym-g/Chinese-Elite" target="_blank" rel="noopener noreferrer" class="github-link" aria-label="View source on GitHub">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" role="img">
                    <title>GitHub</title>
                    <path fill="#FFF" d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
                </svg>
            </a>
        </div>
    </div>

    <div id="search-input-panel" class="collapsed">
        <div id="node-search-content" class="search-content active">
            <input type="text" id="node-search-input" placeholder="输入节点名称...">
            <button id="node-search-submit">搜索</button>
        </div>
        <div id="path-search-content" class="search-content">
            <input type="text" id="path-source-input" placeholder="输入源节点...">
            <input type="number" id="path-limit-input" value="3" min="1" max="10" title="路径数量限制">
            <input type="text" id="path-target-input" placeholder="输入目标节点...">
            <button id="path-search-submit">搜索</button>
        </div>
        <button id="search-panel-close-btn" aria-label="关闭搜索面板">&times;</button>
    </div>

    <div class="controls">
        <div id="language-selector-container">
            <button id="language-toggle-btn" aria-label="选择语言">
                <svg class="globe-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L8 12v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
            </button>
            <ul id="language-options" role="menu" class="collapsed">
                <li role="menuitem" data-lang="zh-cn">简体中文</li>
                <li role="menuitem" data-lang="en">English</li>
            </ul>
        </div>

        <div class="date-control-wrapper">
            <label for="start-date-group">开始日期:</label>
            <div class="date-input-group" id="start-date-group">
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="start-year" title="增加年份"></button>
                    <input type="text" class="date-part" id="start-year"  maxlength="4" inputmode="numeric" pattern="[0-9]*" value="1976">
                    <button class="arrow down" data-target="start-year" title="减少年份"></button>
                </div>
                <span>-</span>
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="start-month" title="增加月份"></button>
                    <input type="text" class="date-part" id="start-month" maxlength="2" inputmode="numeric" pattern="[0-9]*" value="9">
                    <button class="arrow down" data-target="start-month" title="减少月份"></button>
                </div>
                <span>-</span>
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="start-day" title="增加日期"></button>
                    <input type="text" class="date-part" id="start-day"   maxlength="2" inputmode="numeric" pattern="[0-9]*" value="9">
                    <button class="arrow down" data-target="start-day" title="减少日期"></button>
                </div>
            </div>
        </div>

        <div class="interval-control-container">
            <div id="interval-inputs-wrapper" class="interval-inputs hidden">
                <input type="text" class="interval-part" id="interval-year" placeholder="年" inputmode="numeric">
                <input type="text" class="interval-part" id="interval-month" placeholder="月" inputmode="numeric">
                <input type="text" class="interval-part" id="interval-day" placeholder="日" inputmode="numeric">
                <button id="set-interval-btn">设置</button>
            </div>
            <a href="#" id="toggle-interval-btn">设置间隔</a>
            <div class="date-separator">—</div>
            <button id="clear-interval-btn" class="hidden">清除限制</button>
        </div>

        <div class="date-control-wrapper">
            <label for="end-date-group">结束日期:</label>
            <div class="date-input-group" id="end-date-group">
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="end-year" title="增加年份"></button>
                    <input type="text" class="date-part" id="end-year"  maxlength="4" inputmode="numeric" pattern="[0-9]*" value="1976">
                    <button class="arrow down" data-target="end-year" title="减少年份"></button>
                </div>
                <span>-</span>
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="end-month" title="增加月份"></button>
                    <input type="text" class="date-part" id="end-month" maxlength="2" inputmode="numeric" pattern="[0-9]*" value="10">
                    <button class="arrow down" data-target="end-month" title="减少月份"></button>
                </div>
                <span>-</span>
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="end-day" title="增加日期"></button>
                    <input type="text" class="date-part" id="end-day"   maxlength="2" inputmode="numeric" pattern="[0-9]*" value="6">
                    <button class="arrow down" data-target="end-day" title="减少日期"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="legend-wrapper">
        <div id="legend-container">
            <div class="legend-content"></div>
        </div>
        <div class="legend-toggle">
            <div class="toggle-lines">
                <span class="toggle-line"></span>
                <span class="toggle-line"></span>
            </div>
        </div>
    </div>

    <div id="graph-container">
        <!-- <svg id="graph"></svg> -->
    </div>
    
    <div class="tooltip" style="opacity:0;"></div>

    <div id="error-toast" class="toast hidden">
        <span id="error-toast-message"></span>
        <button id="error-toast-close">&times;</button>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script type="module" src="main.js"></script> 
</body>
</html>
