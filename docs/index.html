<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Elite - Interactive Graph</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <div id="search-trigger-container">
            <button id="search-toggle-btn" aria-label="打开搜索">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/></svg>
            </button>
            <div id="search-mode-selector" class="collapsed">
                <div id="search-mode-current" tabindex="0" role="button" aria-haspopup="true" aria-expanded="false">
                    <span>节点</span>
                    <svg class="chevron-down" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/></svg>
                </div>
                <ul id="search-mode-options" role="menu" class="collapsed">
                    <li role="menuitem" data-mode="node">节点</li>
                    <li role="menuitem" data-mode="path">路径</li>
                </ul>
            </div>
        </div>

        <h1>『中国精英：关系图谱』</h1>
        <a href="https://github.com/anonym-g/Chinese-Elite" target="_blank" rel="noopener noreferrer" class="github-link" aria-label="View source on GitHub">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" role="img">
                <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.228 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
            </svg>
        </a>
    </div>

    <div id="search-input-panel" class="collapsed">
        <div id="node-search-content" class="search-content active">
            <input type="text" id="node-search-input" placeholder="输入节点名称...">
            <button id="node-search-submit">搜索</button>
        </div>
        <div id="path-search-content" class="search-content">
            <input type="text" id="path-source-input" placeholder="输入源节点...">
            <input type="number" id="path-limit-input" value="3" min="1" max="10" title="路径数量限制">
            <input type="text" id="path-target-input" placeholder="输入目标节点...">
            <button id="path-search-submit">搜索</button>
        </div>
        <button id="search-panel-close-btn" aria-label="关闭搜索面板">&times;</button>
    </div>

    <div class="controls">
        <div class="date-control-wrapper">
            <label for="start-date-group">开始日期:</label>
            <div class="date-input-group" id="start-date-group">
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="start-year" title="增加年份"></button>
                    <input type="text" class="date-part" id="start-year"  maxlength="4" inputmode="numeric" pattern="[0-9]*" value="1976">
                    <button class="arrow down" data-target="start-year" title="减少年份"></button>
                </div>
                <span>-</span>
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="start-month" title="增加月份"></button>
                    <input type="text" class="date-part" id="start-month" maxlength="2" inputmode="numeric" pattern="[0-9]*" value="9">
                    <button class="arrow down" data-target="start-month" title="减少月份"></button>
                </div>
                <span>-</span>
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="start-day" title="增加日期"></button>
                    <input type="text" class="date-part" id="start-day"   maxlength="2" inputmode="numeric" pattern="[0-9]*" value="9">
                    <button class="arrow down" data-target="start-day" title="减少日期"></button>
                </div>
            </div>
        </div>

        <div class="interval-control-container">
            <div id="interval-inputs-wrapper" class="interval-inputs hidden">
                <input type="text" class="interval-part" id="interval-year" placeholder="年" inputmode="numeric">
                <input type="text" class="interval-part" id="interval-month" placeholder="月" inputmode="numeric">
                <input type="text" class="interval-part" id="interval-day" placeholder="日" inputmode="numeric">
                <button id="set-interval-btn">设置</button>
            </div>
            <a href="#" id="toggle-interval-btn">设置间隔</a>
            <div class="date-separator">—</div>
            <button id="clear-interval-btn" class="hidden">清除限制</button>
        </div>

        <div class="date-control-wrapper">
            <label for="end-date-group">结束日期:</label>
            <div class="date-input-group" id="end-date-group">
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="end-year" title="增加年份"></button>
                    <input type="text" class="date-part" id="end-year"  maxlength="4" inputmode="numeric" pattern="[0-9]*" value="1976">
                    <button class="arrow down" data-target="end-year" title="减少年份"></button>
                </div>
                <span>-</span>
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="end-month" title="增加月份"></button>
                    <input type="text" class="date-part" id="end-month" maxlength="2" inputmode="numeric" pattern="[0-9]*" value="10">
                    <button class="arrow down" data-target="end-month" title="减少月份"></button>
                </div>
                <span>-</span>
                <div class="date-part-wrapper">
                    <button class="arrow up" data-target="end-day" title="增加日期"></button>
                    <input type="text" class="date-part" id="end-day"   maxlength="2" inputmode="numeric" pattern="[0-9]*" value="6">
                    <button class="arrow down" data-target="end-day" title="减少日期"></button>
                </div>
            </div>
        </div>
    </div>

    <div class="legend-wrapper">
        <div id="legend-container">
            <div class="legend-content"></div>
        </div>
        <div class="legend-toggle">
            <div class="toggle-lines">
                <span class="toggle-line"></span>
                <span class="toggle-line"></span>
            </div>
        </div>
    </div>

    <div id="graph-container">
        <svg id="graph"></svg>
    </div>
    
    <div class="tooltip" style="opacity:0;"></div>

    <div id="error-toast" class="toast hidden">
        <span id="error-toast-message"></span>
        <button id="error-toast-close">&times;</button>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script type="module" src="main.js"></script> 
</body>
</html>
